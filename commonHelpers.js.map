{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// imports\n\nimport flatpickr from \"flatpickr\";\n\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\n\n// =============================================================\n\n\n\n\n\n// finding elements\n   const startBtn = document.querySelector('[data-start]');\n   const input = document.querySelector('#datetime-picker')\n    \n   const clock = {\n    days: document.querySelector('[data-days]'),\n    hours: document.querySelector('[data-hours]'),\n    minutes: document.querySelector('[data-minutes]'),\n    seconds: document.querySelector('[data-seconds]'),\n   };\n\n// =============================================================\n\nstartBtn.disabled = true;\n\nlet countdownActive = false;\n\n\n// click to button\n\nlet initTime;\nlet intervalId;\n\nstartBtn.addEventListener('click', () => {\n\n    countdownActive = true;\n\n    startBtn.disabled = true;\n    input.disabled = true;\n\n    \n\n    intervalId = setInterval(() => {\n        const currentTime = Date.now();\n        const differenceInTime = initTime - currentTime;\n        const time = convertMS(differenceInTime);\n        const strTime = getTime(time);\n        \n        \n}, 1000);\n\n});\n\n// =============================================================\n\n\n\n\n\n\n// convert mls to date-obj\n\nlet isErrorNotified = false;\n\nfunction convertMS(ms, e = null) {\n    let s = Math.floor(ms / 1000);\n    let m = Math.floor(s / 60) % 60;\n    let h = Math.floor(s / 3600) % 24;\n    let d = Math.floor(s / 86400);\n    s %= 60;\n    m %= 60;\n    h %= 24;\n\n    if (initTime < Date.now()) {\n        if (!isErrorNotified) {\n       iziToast.error ({\n        title: 'Помилка',\n        message: 'Please choose a date in the future',\n        position: \"topRight\",\n        onClosing: function () {\n            input.disabled = false;\n            startBtn.disabled = false;\n            countdownActive = false;\n          }\n          \n       });\n       isErrorNotified = true;\n    }\n       input.value = '';\n        if (e) e.stopPropagation();\n        return {d:0, h:0, m:0, s:0};\n    \n    } else {\n        isErrorNotified = false;\n    }\n   \n    return {d, h, m, s};\n  \n}\n\n// =============================================================\n\n\n\nfunction updateCountdown() {\n    if (!countdownActive) \n        return; \n    const currentTime = Date.now();\n    const differenceInTime = initTime - currentTime;\n    \n    if (differenceInTime <= 0) {\n        clearInterval(intervalId);\n        countdownActive = false;\n        input.disabled = false;\n        startBtn.disabled = false;\n\n        return;\n    }\n\n    const time = convertMS(differenceInTime);\n    const strTime = getTime(time);\n    console.log(strTime);\n    \n}\n\n\n\n\n// function from ftatpickr\n\nflatpickr(input, {\n\n    enableTime: true,\n    time_24hr: true,\n    // minDate: \"today\",можна зробити так\n    \n    onClose: (selectedDates) => {\n        if (selectedDates.length > 0) {\n            const userDate = selectedDates[0];\n            initTime = userDate.getTime();\n                \n        }\n       \n        startBtn.disabled = false;\n        requestAnimationFrame(updateCountdown);\n    },\n});\n\n\n// =============================================================\n\n\n\n// setting string and updating values\n\nfunction getTime({d, h, m, s}) {\n    const days = d.toString().padStart(2, '0');\n    const hours = h.toString().padStart(2, '0');\n    const minutes = m.toString().padStart(2, '0');\n    const seconds = s.toString().padStart(2, '0');\n\n\n    clock.days.textContent = days;\n    clock.hours.textContent = hours;\n    clock.minutes.textContent = minutes;\n    clock.seconds.textContent = seconds;\n\n    return `${days}:${hours}:${minutes}:${seconds}`;\n}\n\n\n\n\n // =============================================================\n\n\n\n"],"names":["startBtn","input","clock","countdownActive","initTime","intervalId","currentTime","differenceInTime","time","convertMS","getTime","isErrorNotified","ms","e","s","m","h","d","iziToast","updateCountdown","strTime","flatpickr","selectedDates","days","hours","minutes","seconds"],"mappings":"2GAcG,MAAMA,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAQ,SAAS,cAAc,kBAAkB,EAEjDC,EAAQ,CACb,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CACpD,EAIAF,EAAS,SAAW,GAEpB,IAAIG,EAAkB,GAKlBC,EACAC,EAEJL,EAAS,iBAAiB,QAAS,IAAM,CAErCG,EAAkB,GAElBH,EAAS,SAAW,GACpBC,EAAM,SAAW,GAIjBI,EAAa,YAAY,IAAM,CAC3B,MAAMC,EAAc,KAAK,MACnBC,EAAmBH,EAAWE,EAC9BE,EAAOC,EAAUF,CAAgB,EACvBG,EAAQF,CAAI,CAGpC,EAAG,GAAI,CAEP,CAAC,EAWD,IAAIG,EAAkB,GAEtB,SAASF,EAAUG,EAAIC,EAAI,KAAM,CAC7B,IAAIC,EAAI,KAAK,MAAMF,EAAK,GAAI,EACxBG,EAAI,KAAK,MAAMD,EAAI,EAAE,EAAI,GACzBE,EAAI,KAAK,MAAMF,EAAI,IAAI,EAAI,GAC3BG,EAAI,KAAK,MAAMH,EAAI,KAAK,EAK5B,OAJAA,GAAK,GACLC,GAAK,GACLC,GAAK,GAEDZ,EAAW,KAAK,OACXO,IACNO,EAAS,MAAO,CACf,MAAO,UACP,QAAS,qCACT,SAAU,WACV,UAAW,UAAY,CACnBjB,EAAM,SAAW,GACjBD,EAAS,SAAW,GACpBG,EAAkB,EACnB,CAEX,CAAQ,EACDQ,EAAkB,IAElBV,EAAM,MAAQ,GACTY,GAAGA,EAAE,kBACF,CAAC,EAAE,EAAG,EAAE,EAAG,EAAE,EAAG,EAAE,CAAC,IAG1BF,EAAkB,GAGf,CAAC,EAAAM,EAAG,EAAAD,EAAG,EAAAD,EAAG,EAAAD,CAAC,EAEtB,CAMA,SAASK,GAAkB,CACvB,GAAI,CAAChB,EACD,OACJ,MAAMG,EAAc,KAAK,MACnBC,EAAmBH,EAAWE,EAEpC,GAAIC,GAAoB,EAAG,CACvB,cAAcF,CAAU,EACxBF,EAAkB,GAClBF,EAAM,SAAW,GACjBD,EAAS,SAAW,GAEpB,MACH,CAED,MAAMQ,EAAOC,EAAUF,CAAgB,EACjCa,EAAUV,EAAQF,CAAI,EAC5B,QAAQ,IAAIY,CAAO,CAEvB,CAOAC,EAAUpB,EAAO,CAEb,WAAY,GACZ,UAAW,GAGX,QAAUqB,GAAkB,CACpBA,EAAc,OAAS,IAEvBlB,EADiBkB,EAAc,CAAC,EACZ,WAIxBtB,EAAS,SAAW,GACpB,sBAAsBmB,CAAe,CACxC,CACL,CAAC,EASD,SAAST,EAAQ,CAAC,EAAAO,EAAG,EAAAD,EAAG,EAAAD,EAAG,EAAAD,CAAC,EAAG,CAC3B,MAAMS,EAAON,EAAE,SAAQ,EAAG,SAAS,EAAG,GAAG,EACnCO,EAAQR,EAAE,SAAQ,EAAG,SAAS,EAAG,GAAG,EACpCS,EAAUV,EAAE,SAAQ,EAAG,SAAS,EAAG,GAAG,EACtCW,EAAUZ,EAAE,SAAQ,EAAG,SAAS,EAAG,GAAG,EAG5C,OAAAZ,EAAM,KAAK,YAAcqB,EACzBrB,EAAM,MAAM,YAAcsB,EAC1BtB,EAAM,QAAQ,YAAcuB,EAC5BvB,EAAM,QAAQ,YAAcwB,EAErB,GAAGH,CAAI,IAAIC,CAAK,IAAIC,CAAO,IAAIC,CAAO,EACjD"}