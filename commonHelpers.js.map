{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// imports\n\nimport flatpickr from \"flatpickr\";\n\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\n\n// =============================================================\n\n\n\n\n\n// finding elements\n   const startBtn = document.querySelector('[data-start]');\n   const input = document.querySelector('#datetime-picker')\n    \n   const clock = {\n    days: document.querySelector('[data-days]'),\n    hours: document.querySelector('[data-hours]'),\n    minutes: document.querySelector('[data-minutes]'),\n    seconds: document.querySelector('[data-seconds]'),\n   };\n\n// =============================================================\n\nstartBtn.disabled = true;\n\nlet countdownActive = false;\n\n\n// click to button\n\nlet initTime;\n\nstartBtn.addEventListener('click', () => {\n\n    countdownActive = true;\n\n    startBtn.disabled = true;\n    input.disabled = true;\n\n    \n\n    setInterval(() => {\n        const currentTime = Date.now();\n        const differenceInTime = initTime - currentTime;\n        const time = convertMS(differenceInTime);\n        const strTime = getTime(time);\n        \n        \n}, 1000);\n\n});\n\n// =============================================================\n\n\n\n\n\n\n// convert mls to date-obj\n\nlet isErrorNotified = false;\n\nfunction convertMS(ms, e = null) {\n    let s = Math.floor(ms / 1000);\n    let m = Math.floor(s / 60) % 60;\n    let h = Math.floor(s / 3600) % 24;\n    let d = Math.floor(s / 86400);\n    s %= 60;\n    m %= 60;\n    h %= 24;\n\n    if (initTime < Date.now()) {\n        if (!isErrorNotified) {\n       iziToast.error ({\n        title: 'Помилка',\n        message: 'Please choose a date in the future',\n        position: \"topRight\",\n        onClosing: function () {\n            input.disabled = false;\n            startBtn.disabled = false;\n            countdownActive = false;\n          }\n          \n       });\n       isErrorNotified = true;\n    }\n       input.value = '';\n        if (e) e.stopPropagation();\n        return {d:0, h:0, m:0, s:0};\n    \n    } else {\n        isErrorNotified = false;\n    }\n    \n    return {d, h, m, s};\n}\n\n// =============================================================\n\n\n\nfunction updateCountdown() {\n    if (!countdownActive) return; \n    const currentTime = Date.now();\n    const differenceInTime = initTime - currentTime;\n    \n    if (differenceInTime <= 0) {\n       \n        countdownActive = false;\n        input.disabled = false;\n        startBtn.disabled = false;\n        \n        return;\n    }\n\n    const time = convertMS(differenceInTime);\n    const strTime = getTime(time);\n    console.log(strTime);\n    requestAnimationFrame(updateCountdown);\n}\n\n\n\n\n// function from ftatpickr\n\nflatpickr(input, {\n    // ...\n    onClose: (selectedDates) => {\n        const userDate = selectedDates[0];\n        initTime = userDate;\n       \n        startBtn.disabled = false;\n        requestAnimationFrame(updateCountdown);\n    },\n});\n\n\n// =============================================================\n\n\n\n// setting string and updating values\n\nfunction getTime({d, h, m, s}) {\n    const days = d.toString().padStart(2, '0');\n    const hours = h.toString().padStart(2, '0');\n    const minutes = m.toString().padStart(2, '0');\n    const seconds = s.toString().padStart(2, '0');\n\n\n    clock.days.textContent = days;\n    clock.hours.textContent = hours;\n    clock.minutes.textContent = minutes;\n    clock.seconds.textContent = seconds;\n\n    return `${days}:${hours}:${minutes}:${seconds}`;\n}\n\n\n\n\n // =============================================================\n\n\n\n"],"names":["startBtn","input","clock","countdownActive","initTime","currentTime","differenceInTime","time","convertMS","getTime","isErrorNotified","ms","s","m","h","d","iziToast","updateCountdown","strTime","flatpickr","selectedDates","days","hours","minutes","seconds"],"mappings":"2GAcG,MAAMA,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAQ,SAAS,cAAc,kBAAkB,EAEjDC,EAAQ,CACb,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CACpD,EAIAF,EAAS,SAAW,GAEpB,IAAIG,EAAkB,GAKlBC,EAEJJ,EAAS,iBAAiB,QAAS,IAAM,CAErCG,EAAkB,GAElBH,EAAS,SAAW,GACpBC,EAAM,SAAW,GAIjB,YAAY,IAAM,CACd,MAAMI,EAAc,KAAK,MACnBC,EAAmBF,EAAWC,EAC9BE,EAAOC,EAAUF,CAAgB,EACvBG,EAAQF,CAAI,CAGpC,EAAG,GAAI,CAEP,CAAC,EAWD,IAAIG,EAAkB,GAEtB,SAASF,EAAUG,EAAI,EAAI,KAAM,CAC7B,IAAIC,EAAI,KAAK,MAAMD,EAAK,GAAI,EACxBE,EAAI,KAAK,MAAMD,EAAI,EAAE,EAAI,GACzBE,EAAI,KAAK,MAAMF,EAAI,IAAI,EAAI,GAC3BG,EAAI,KAAK,MAAMH,EAAI,KAAK,EAK5B,OAJAA,GAAK,GACLC,GAAK,GACLC,GAAK,GAEDV,EAAW,KAAK,OACXM,IACNM,EAAS,MAAO,CACf,MAAO,UACP,QAAS,qCACT,SAAU,WACV,UAAW,UAAY,CACnBf,EAAM,SAAW,GACjBD,EAAS,SAAW,GACpBG,EAAkB,EACnB,CAEX,CAAQ,EACDO,EAAkB,IAElBT,EAAM,MAAQ,GACT,GAAG,EAAE,kBACF,CAAC,EAAE,EAAG,EAAE,EAAG,EAAE,EAAG,EAAE,CAAC,IAG1BS,EAAkB,GAGf,CAAC,EAAAK,EAAG,EAAAD,EAAG,EAAAD,EAAG,EAAAD,CAAC,EACtB,CAMA,SAASK,GAAkB,CACvB,GAAI,CAACd,EAAiB,OACtB,MAAME,EAAc,KAAK,MACnBC,EAAmBF,EAAWC,EAEpC,GAAIC,GAAoB,EAAG,CAEvBH,EAAkB,GAClBF,EAAM,SAAW,GACjBD,EAAS,SAAW,GAEpB,MACH,CAED,MAAMO,EAAOC,EAAUF,CAAgB,EACjCY,EAAUT,EAAQF,CAAI,EAC5B,QAAQ,IAAIW,CAAO,EACnB,sBAAsBD,CAAe,CACzC,CAOAE,EAAUlB,EAAO,CAEb,QAAUmB,GAAkB,CAExBhB,EADiBgB,EAAc,CAAC,EAGhCpB,EAAS,SAAW,GACpB,sBAAsBiB,CAAe,CACxC,CACL,CAAC,EASD,SAASR,EAAQ,CAAC,EAAAM,EAAG,EAAAD,EAAG,EAAAD,EAAG,EAAAD,CAAC,EAAG,CAC3B,MAAMS,EAAON,EAAE,SAAQ,EAAG,SAAS,EAAG,GAAG,EACnCO,EAAQR,EAAE,SAAQ,EAAG,SAAS,EAAG,GAAG,EACpCS,EAAUV,EAAE,SAAQ,EAAG,SAAS,EAAG,GAAG,EACtCW,EAAUZ,EAAE,SAAQ,EAAG,SAAS,EAAG,GAAG,EAG5C,OAAAV,EAAM,KAAK,YAAcmB,EACzBnB,EAAM,MAAM,YAAcoB,EAC1BpB,EAAM,QAAQ,YAAcqB,EAC5BrB,EAAM,QAAQ,YAAcsB,EAErB,GAAGH,CAAI,IAAIC,CAAK,IAAIC,CAAO,IAAIC,CAAO,EACjD"}